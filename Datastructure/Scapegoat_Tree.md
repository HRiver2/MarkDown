# 替罪羊树()

## 定义

一种平衡树, 不用旋转维护自己的平衡, 逻辑和宗法树类似, 在左右子树极度不平衡时维护它的平衡性, 只不过宗法树是旋转, 比较温和, 而替罪羊树是重构左右子树.

所以替罪羊树不需要旋转.

和旋转不同的是, 一次重构可以使它的整个子树的每个节点的两个儿子平衡, 所以就不需要像宗法树一样, 每次遇到左右不平衡的节点都维护, 只要在这次操作经过的所有节点中, 找到深度最小的那个不平衡的节点, 然后重构它的子树即可.

## 重构

字面意思, 重新建树, 如果字数规模为 $n$, 则重构复杂度是实实在在的 $O(n)$, 至于为什么时间复杂度正确, 之后会给出证明.

操作逻辑很简单, $O(n)$ 中序遍历, 得到一个排序好的序列, 然后每次取中点作为子树的根, 将序列分成两段, 两段分别递归建树.

```cpp

```

## 删除

先说删除, 是因为替罪羊树的删除不同于基于旋转的平衡树, 因为不能旋转, 因此不能合并, 所以一个点的删除不能仅仅将它的两个子树合并后插入这个点原来的位置. 为了避免破坏树的结构, 所以在需要删除的节点上打标记, 然后删除这个节点.

这里还有一个小优化: 当一棵子树没有真实存在的点的时候, 直接删除整棵子树.

```cpp

```

## 插入

```cpp

```

## 查排名

```cpp

```

## 查第 $k$ 大


## 查前驱

## 查后继

